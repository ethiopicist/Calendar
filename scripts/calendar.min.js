/*!
 * jQuery Ethiopic Calendar
 * By Augustine Dickinson
 *
 * Copyright (c) 2020 Ethiopicist.com and its contributors.
 *
 * @licence MIT License
 */
!function(a){var e={init:function(e,l){var o=this;a.i18n({locale:e.locale}).load({en:"/i18n/languages/en.json","gez-eth":"/i18n/languages/gez-eth.json","gez-lat":"/i18n/languages/gez-lat.json","am-eth":"/i18n/languages/am-eth.json","am-lat":"/i18n/languages/am-lat.json","ti-eth":"/i18n/languages/ti-eth.json","ti-lat":"/i18n/languages/ti-lat.json",om:"/i18n/languages/om.json",pl:"/i18n/languages/pl.json",fr:"/i18n/languages/fr.json",de:"/i18n/languages/de.json"}).done((function(){t(o),n(o,e),l&&l()}))},update:function(a,e){n(this,a),e&&e()}};function t(e){e.html("");var t=a('<div class="calendar-head" />').appendTo(e);a('<div class="calendar-title-row" />').append(a('<div class="calendar-title-cell" />').append(a('<div class="calendar-title-cell-inner" />').append(a('<h1 class="calendar-title" />').text(" ").prepend(a('<span class="month-name" />')).append(a('<span class="year-number" />'))))).appendTo(t);var n=a('<div class="calendar-dow-row" />').appendTo(t);for(i=0;i<7;i++)n.append(a("<div />").addClass("calendar-dow-cell-"+i).append(a('<div class="calendar-dow-cell-inner">').append(a('<span class="dow-name-long" />'),a('<span class="dow-name-short" />'))));var l=a('<div class="calendar-body" />').appendTo(e);for(i=0;i<6;i++){var o=a('<div class="calendar-row-'+i+'" />').appendTo(l);for(j=0;j<7;j++){var r=a('<div class="calendar-cell-'+i+"-"+j+'" />').appendTo(o);a('<div class="calendar-cell-inner" />').append(a('<span class="label-ethiopian-date" />'),a('<span class="label-ethiopian-month-long" />'),a('<span class="label-ethiopian-month-short" />'),a('<span class="label-ethiopian-month-narrow" />'),a('<span class="label-alternate-date" />'),a('<span class="label-alternate-month-long" />'),a('<span class="label-alternate-month-short" />'),a('<span class="label-alternate-month-narrow" />')).appendTo(r)}}}function n(e,t){const n=t.userPreferences;t.month.year<1&&(t.month.year=1),t.month.month<1?t.month.month=1:t.month.month>13&&(t.month.month=13),"om"==n.language?n.useNumerals=!1:"am-eth"!=t.locale&&"ti-eth"!=t.locale||(n.useScript=!0),"om"==n.language?a.i18n().locale="om":a.i18n().locale=n.language+(n.useScript?"-eth":"-lat");const o=a(e).find(".calendar-head .calendar-title-row .calendar-title-cell .calendar-title-cell-inner .calendar-title");o.children(".month-name").text(a.i18n("ethMonth"+t.month.month+"long")),o.children(".year-number").text(toEthiopicNumeral(n.useAmataAlam?parseInt(t.month.year)+5500:t.month.year,n.useNumerals));const d=a(e).children(".calendar-body");var s=l(t.month,n.firstWeekday);for(i=0;i<6;i++){const e=d.children(".calendar-row-"+i);for(j=0;j<7;j++){const l=e.children(".calendar-cell-"+i+"-"+j);s.year>0?(l.attr("data-ethiopic-year",s.year),l.attr("data-ethiopic-month",s.month),l.attr("data-ethiopic-date",s.date),l.attr("data-alternate-year",toWestern(s).year),l.attr("data-alternate-month",toWestern(s).month),l.attr("data-alternate-date",toWestern(s).date)):(l.removeAttr("data-ethiopic-year data-ethiopic-month data-ethiopic-date"),l.removeAttr("data-alternate-year data-alternate-month data-alternate-date")),l.removeClass("is-different-month is-today");const o=toEthiopic({year:(new Date).getFullYear(),month:(new Date).getMonth()+1,date:(new Date).getDate()});s.month!=t.month.month?l.addClass("is-different-month"):s.year==o.year&&s.month==o.month&&s.date==o.date&&l.addClass("is-today");const d=l.children(".calendar-cell-inner");d.children().text(""),s.year>0&&(d.children(".label-ethiopian-date").text(toEthiopicNumeral(s.date,n.useNumerals)),(1==s.date||0==i&&0==j)&&(d.children(".label-ethiopian-month-long").text(a.i18n("ethMonth"+s.month+"long")),d.children(".label-ethiopian-month-short, .label-ethiopian-month-narrow").text(a.i18n("ethMonth"+s.month+"short"))),n.showAlternateDates&&d.children(".label-alternate-date").text(toWestern(s).date)),s=r(s)}}n.localeDayNames&&(a.i18n().locale=t.locale);const h=a(e).find(".calendar-head .calendar-dow-row");for(i=0;i<7;i++){var c=(i+n.firstWeekday)%7;0==c&&(c=7);const e=h.find(".calendar-dow-cell-"+i+" .calendar-dow-cell-inner");e.children(".dow-name-long").text(a.i18n("day"+c+"long")),e.children(".dow-name-short").text(a.i18n("day"+c+"short"))}if(n.localeDayNames||(a.i18n().locale=t.locale),n.showAlternateDates){const e=a('.calendar-cell-0-0, div[data-alternate-date="1"]');e.each((function(){if(a(this).is("[data-alternate-year]")){var e={month:a(this).attr("data-alternate-month"),year:a(this).attr("data-alternate-year")};a(this).find(".label-alternate-month-long").text(a.i18n("greMonth"+e.month+"long")+" "+e.year),a(this).find(".label-alternate-month-short").text(a.i18n("greMonth"+e.month+"short")+a.i18n("shortSeparator")+e.year)}}))}}function l(a,e){a.date=1;var t={year:a.year,month:a.month,date:a.date,day:dayOfWeek(ethiopicToJdn(a))};const n=(t.day-e+7)%7;var l=t;for(i=0;i<n;i++)l=o(l);return l}function o(a){return 1==a.month&&1==a.date?(a.year-=1,a.month=13,a.year%4==3?a.date=6:a.date=5):1==a.date?(a.month-=1,a.date=30):a.date-=1,1==a.day?a.day=7:a.day-=1,a}function r(a){return 13==a.month&&6==a.date||13==a.month&&5==a.date&&a.year%4!=3?(a.year+=1,a.month=1,a.date=1):30==a.date?(a.month+=1,a.date=1):a.date+=1,7==a.day?a.day=1:a.day+=1,a}a.fn.ethiopianCalendar=function(t){return e[t]?e[t].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof t&&t?void a.error("Method "+t+" does not exist in jQuery.ethiopiancalendar"):e.init.apply(this,arguments)}}(jQuery);