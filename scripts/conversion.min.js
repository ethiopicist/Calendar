/*!
 * Functions to Convert Between Ethiopic dates, Western (Julian/Gregorian) dates, and Islamic dates
 * By Augustine Dickinson
 *
 * Copyright (c) 2020 Ethiopicist.com and its contributors.
 *
 * @licence MIT License
 */
function ethiopicToJdn(e,t){if("object"!=typeof e)return console.log("Parameter date expects an object."),!1;if(!("year"in e&&"month"in e))return console.log("Parameter date must contain a year and a month."),!1;if("date"in e||(e.date=1),"number"!=typeof e.year&&"string"!=typeof e.year||"number"!=typeof e.month&&"string"!=typeof e.month||"number"!=typeof e.date&&"string"!=typeof e.date)return console.log("Values for date must be numbers or strings."),!1;if(e.year=parseInt(e.year),e.month=parseInt(e.month),e.date=parseInt(e.date),e.month<1||e.month>13)return console.log("date.month must be an integer from 1 (Mas) to 13 (Pag)."),!1;if(e.date<1||e.date>30)return console.log("date.date must be an integer from 1 to 30."),!1;if(13==e.month){if(e.year%4==3&&e.date>6)return console.log("In leap years, if date.month == 13 then date.date must be <=6."),!1;if(e.year%4!=3&&e.date>5)return console.log("In non-leap years, if date.month == 13 then date.date must be <=5."),!1}if(void 0===t)var t=!1;else if("boolean"!=typeof t)return console.log("Parameter isAmataAlam expects a boolean value."),!1;if(t&&(e.year-=5500),e.year<1)return console.log("Dates before 1/1/1 AM are invalid."),!1;const o=30*e.month+e.date-31,a=1724221+365*(e.year-1)+Math.floor(e.year/4)+o-.5;return a}function westernToJdn(e){if("object"!=typeof e)return console.log("Parameter date expects an object."),!1;if(!("year"in e&&"month"in e))return console.log("Parameter date must contain a year and a month."),!1;if("date"in e||(e.date=1),"number"!=typeof e.year&&"string"!=typeof e.year||"number"!=typeof e.month&&"string"!=typeof e.month||"number"!=typeof e.date&&"string"!=typeof e.date)return console.log("Values for date must be numbers or strings."),!1;if(e.year=parseInt(e.year),e.month=parseInt(e.month),e.date=parseInt(e.date),e.month<1||e.month>12)return console.log("date.month must be an integer from 1 (Jan) to 12 (Dec)."),!1;if(e.date<1||e.date>31)return console.log("date.date must be an integer from 1 to 31."),!1;if((4==e.month||6==e.month||9==e.month||11==e.month)&&e.date>30)return console.log("For date.month in [4,6,9,11] date.date must be <= 30."),!1;if(2==e.month){if(e.year%4==0&&(e.year<=1582||e.year%100!=0||e.year%400==0)&&e.date>29)return console.log("In leap years, if date.month == 2 then date.date must be <=29."),!1;if(e.date>28)return console.log("In non-leap years, if date.month == 2 then date.date must be <=28."),!1}e.month<3&&(e.year--,e.month+=12);const t=Math.floor(e.year/100),o=Math.floor(t/4),a=2-t+o,r=Math.floor(365.25*(e.year+4716)),n=Math.floor(30.6001*(e.month+1));if(e.year<8||8==e.year&&e.month<8||8==e.year&&8==e.month&&e.date<29)return console.log("Dates before 8/8/29 are invalid."),!1;if(e.year<1582||1582==e.year&&e.month<10||1582==e.year&&10==e.month&&e.date<=4)var i=e.date+r+n-1524.5;else{if(!(e.year>1582||1582==e.year&&e.month>10||1582==e.year&&10==e.month&&e.date>=15))return console.log("Dates from 1582/10/5 to 1582/10/14 are invalid."),!1;var i=a+e.date+r+n-1524.5}return i}function jdnToEthiopic(e,t){if(void 0===t)var t=!1;else if("boolean"!=typeof t)return console.log("Parameter useAmataAlam expects a boolean value."),!1;const o=(e-1723855.5)%1461,a=o%365+365*Math.floor(o/1460);return date={},date.year=4*Math.floor((e-1723856)/1461)+Math.floor(o/365)-Math.floor(o/1460),date.month=Math.floor(a/30)+1,date.date=a%30+1,date.day=dayOfWeek(e),t&&(date.year+=5500),date}function jdnToWestern(e){const t=e+.5,o=Math.floor(t);if(e<2299160.5)var a=o;else{const e=Math.floor((o-1867216.25)/36524.25),t=Math.floor(e/4);var a=o+1+e-t}const r=a+1524,n=Math.floor((r-122.1)/365.25),i=Math.floor(365.25*n),m=Math.floor((r-i)/30.6001),l=Math.floor(30.6001*m);return date={},date.date=r-i-l+(t-o),date.month=m-1<=12?m-1:m-13,date.year=date.month<=2?n-4715:n-4716,date.day=dayOfWeek(e),date}function toWestern(e,t){return jdnToWestern(ethiopicToJdn(e,t))}function toEthiopic(e,t){return jdnToEthiopic(westernToJdn(e),t)}function dayOfWeek(e){return(e+1.5)%7+1}function toEthiopicNumeral(e,t){return void 0!==t&&!1===t?e:("number"!=typeof e&&(e=parseInt(e)),0==e?"":1==e?"፩":2==e?"፪":3==e?"፫":4==e?"፬":5==e?"፭":6==e?"፮":7==e?"፯":8==e?"፰":9==e?"፱":e>=10&&e<20?"፲"+toEthiopicNumeral(e-10):e>=20&&e<30?"፳"+toEthiopicNumeral(e-20):e>=30&&e<40?"፴"+toEthiopicNumeral(e-30):e>=40&&e<50?"፵"+toEthiopicNumeral(e-40):e>=50&&e<60?"፶"+toEthiopicNumeral(e-50):e>=60&&e<70?"፷"+toEthiopicNumeral(e-60):e>=70&&e<80?"፸"+toEthiopicNumeral(e-70):e>=80&&e<90?"፹"+toEthiopicNumeral(e-80):e>=90&&e<100?"፺"+toEthiopicNumeral(e-90):e>=100&&e<200?"፻"+toEthiopicNumeral(e-100):e>=200&&e<1e4?toEthiopicNumeral((e-e%100)/100)+"፻"+toEthiopicNumeral(e%100):e>=1e4&&e<2e4?"፼"+toEthiopicNumeral(e-1e4):e>=2e4&&e<1e6?toEthiopicNumeral((e-e%1e4)/1e4)+"፼"+toEthiopicNumeral(e%1e4):void 0)}